#+TITLE: GIT from the inside
#+AUTHOR: Jens Neuhalfen
#+EMAIL: jens@neuhalfen.name
#+DATE: 2020-12-31

#+SETUPFILE: setupfile.inc
#+SETUPFILE: setupfile-d3graphviz.inc
#+INCLUDE: git-tooling.inc

* Example: images
:PROPERTIES:
:CUSTOM_ID: example_image
:END:
#+NAME: example-image-plantuml
#+begin_src plantuml :file "XXXexample-image-plantuml.png"
@startuml
title Example

' https://plantuml.com/class-diagram
$Class01 "1" *-- "many" Class02 : contains
Class03 o-- Class04 : aggregation
Class05 --> "1" Class060
Class06 -> Class060 : pointing right
@enduml
#+end_src
* Halt on Error
#+begin_src python
raise Exception("please stop")
#+end_src

#+begin_src python
this is a syntax error
#+end_src

#+begin_src bash
echo Hello there
echo Hello there to stderr >&2
exit 1
#+end_src

* Better
:PROPERTIES:
:header-args: :var repo="/tmp/x/number-of-the-beast2"
:repo: /tmp/x/number-of-the-beast2
:END:
#+BEGIN_NOTES
Test note
bla note
#+END_NOTES

# setup
#+CALL: init_repo()

# source/output is hidden
#+begin_src bash :exports results :results silent
echo "$(date +%s%N) 1st in $repo" >> /tmp/log
cd "${repo}" || exit 1
git commit -m'1st commit' --allow-empty
#+end_src

{{{git_with_diff(number1src)}}}

# source is hidden, code is executed via macro
#+NAME: number1src
#+begin_src bash :exports none :results output
echo "$(date +%s%N) 2nd in $repo" >> /tmp/log
cd "${repo}" || exit 1
git commit -m'2nd commit' --allow-empty
#+end_src

#+HTML: <div id='number1src-result' class='r-stretch' scale='2'></div>

#+begin_src bash :exports code :noweb yes
<<number1src>>
#+end_src

{{{git_with_diff_result(number1src)}}}

* XXX                                                                           :noexport:
#+ATTR_REVEAL: :frag (grow shrink roll-in fade-out none appear) :frag_idx (6 5 4 3 2 1)
- I will grow.
- I will shrink.
- I rolled in.
- I will fade out.
- I don't fragment.
- I appear

* Source                                                                        :noexport:
bla

#+ATTR_REVEAL: :code_attribs data-line-numbers='1,3'
#+BEGIN_SRC c++
int main()
{
  cout << "Hello" << endl;
  cout << "World" << endl;
}
#+END_SRC

* Two                                                                           :noexport:
blubb

** Three
threeeeee

** Four
444444

** Table
#+ATTR_HTML: :width 100%
| column_title1  | column_title2 |
|----------------+---------------|
| a              | b             |
| a              | b             |
| a              | b             |

* MATH
${n! \over k!(n-k)!} = {n \choose k}$

* Licensing
   :PROPERTIES:
   :CUSTOM_ID: licensing
   :END:
   - TODO
